<!doctype html>
<html lang="en">
<html>
<head>
<title>Dunphy</title>
	<script src="js/vendor/jquery.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Roboto:500,300,300italic,400,100' rel='stylesheet' type='text/css'>
	<link rel="shortcut icon" href="<?php echo asset('img/icon.ico');?>">

	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>


    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
	<script type='text/javascript' src='js/handlebars.js' ></script>

	<script src="js/foundation.min.js"></script>
	<script src="js/circles.min.js"></script>

	<script>
	$(document).ready(function() { 
		var house_json='{"house":[{"house_id":"1","name":"Sample House 1","owner":"Phil Dunphy","address":"1234 Random Street Atlanta - 30318","package":"InsuracenPackage1","premium":"123","premium_unit":"m/o","score":[{"label":"co-alarm",	"value":25,	"block_average":30,"unit":"count"},{"label":"co-alarm",	"value":25,	"block_average":30,	"unit":"count"	},	{	"label":"co-alarm",	"value":25,	"block_average":30,	"unit":"count"	}]},{"house_id":"2","name":"Sample House 1","owner":"Phil Dunphy","address":"1234 Random Street Atlanta - 30318","package":"InsuracenPackage1","premium":"123","premium_unit":"m/o","score":[{"label":"co-alarm",	"value":25,	"block_average":30,"unit":"count"},{"label":"co-alarm",	"value":25,	"block_average":30,	"unit":"count"	},	{	"label":"co-alarm",	"value":25,	"block_average":30,	"unit":"count"	}]}]}';

		var data=jQuery.parseJSON(house_json);
		console.log(data);
		function updateData(data){
			var Source = $("#box-template").html();
	        var Template = Handlebars.compile(Source);
	        var HTML = Template(data);
	        $('#content').append(HTML);
	        for(var i=0;i<data.house.length;i++){

	        	var myCircle = Circles.create({
					  id:           'circles-'+data.house[i].house_id,
					  radius:       60,
					  value:        43,
					  maxValue:     100,
					  width:        10,
					  text:         function(value){return value + '%';},
					  colors:       ['#D3B6C6', '#4B253A'],
					  duration:       400,
					  wrpClass:     'circles-wrp',
					  textClass:      'circles-text',
					  styleWrapper: true,
					  styleText:    true
					});
	        }
	    }
	      
		updateData(data);

		$('#settingsbutton').click(function(e){
		$('#myModal').foundation('reveal', 'open');

		})
	});


	</script>
<link media="all" type="text/css" rel="stylesheet" href="css/foundation.css">

	<style text='text/css'>
	 .box{
	 	min-height: 100px;
	 	 box-shadow: 0px 5px 8px #888888;
	 	border: 1px solid #ccc;
	 }

	 .large-2half{
	 	width: 22%;
	 	margin: 1%;
	 }
	 .circles-wrp{
	 	display: block;
	 	margin:auto;
	 }
	</style>
</head>
<body style='min-height:100%'>
<div class='large'></div>
<div class="sticky">
  <nav class="top-bar sticky" data-topbar role="navigation" data-options=>
    <ul class="title-area">
	    <li class="name">
	      <h1>
	      	<a href="/">
	      		<img src="img/d.png" style="width:30px;height:30px;margin-top:5px;display:inline-block" />
	      		<span>Dunphy</span>
	      		
	      	</a>
	      </h1>
	     </li>
	     <li class="toggle-topbar notification-menu-item notificaition-mobile"></li>
	     <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>

     </ul>

  <section class="top-bar-section">
    <!-- Right Nav Section -->
    
    <ul class="right">
      <li><a href="#" data-reveal-id="myModal" id='settingsbutton'>Settings</a></li>
	</ul>

    <!--<li class="notification-menu-item hide-for-small">
    </li>-->
      
    </section>
  </nav>
</div>

<div class='content row' id='content'>
<div class='row'>
</div> 
</div>

<div id="myModal" class="reveal-modal" data-reveal>
  <h2>Settings</h2>
  <p class="lead">Your couch.  It is mine.</p>
  <p>I'm a cool paragraph that lives inside of an even cooler modal. Wins!</p>
  <a class="close-reveal-modal">&#215;</a>
</div>

</body>
</html>

<script id="box-template" type="text/x-handlebars-template">

{{#each house}}
<div class='large-2half box columns'>
	<span>{{name}}</span>
	<div class="circle" id="circles-{{house_id}}" style="margin-top:20px"></div>

	<table >
	{{#each score}}
	<tr>
	<td>{{label}}:</td>
	<td>{{value}} {{unit}}</td>
	</tr>
	{{/each}}
	</table>
</div>
{{/each}}
<div class='columns' />
</script>